

SET(LNBMP_VERSION_MAJOR "0")
SET(LNBMP_VERSION_MINOR "1")

MACRO(GEN_VERSION_FILE)
  execute_process(
    COMMAND git log -1 --format=%h
    WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
    OUTPUT_VARIABLE GIT_HASH
    OUTPUT_STRIP_TRAILING_WHITESPACE
    )

  SET(VERSION_FILE ${CMAKE_BINARY_DIR}/lnBMP_version.h)
  FILE(WRITE ${VERSION_FILE} "// Generated by cmake!\n")
  FILE(APPEND  ${VERSION_FILE} "#define LN_BMP_VERSION  \"${LNBMP_VERSION_MAJOR}.${LNBMP_VERSION_MINOR}\"\n")
  FILE(APPEND  ${VERSION_FILE} "#define LN_BMP_GEN_DATE \"${timestamp}\"\n")
  FILE(APPEND  ${VERSION_FILE} "#define LN_BMP_GIT_HASH \"${GIT_HASH}\"\n")
ENDMACRO()


